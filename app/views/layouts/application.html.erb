<!DOCTYPE html>
<html>
<head>

	<title>EuVouNewFront</title>
	<%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>
	<%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<%= csrf_meta_tags %>
</head>
<body>
	<%= javascript_include_tag("reg_map.js") %>
	<!--Data Picker Imports -->
	<!-- Special version of Bootstrap that is isolated to content wrapped in .bootstrap-iso -->
	<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />

	<!--Font Awesome (added because you use icons in your prepend/append)-->
	<link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css" />

	<!-- Extra JavaScript/CSS added manually in "Settings" tab -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

	<!-- Fim Data Picker Imports -->

	<!-- Navigation -->
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header logo-nav">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href='/event'><%= image_tag("logo_1.png",:size => "50x45", :class => "logo") %></a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div id="navbar-search" class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<form id="nav-form" class="navbar-form navbar-right" role="search">
						<div class="form-group pesquisa">
							<input type="text" class="form-control pesquisa" placeholder="Search">
						</div>
						<button type="submit" class="btn btn-default">Pesquisar</button>
					</form>
				</ul>
				<ul id="navbar-link-list" class="nav navbar-nav">
					<% if session[:current_user] %>
						<li><a href="/singout">Sair</a></li>
					<% else %>
						<li><a href="/login">Login</a></li>
						<li><a href="/user/cadastro">Cadastro</a></li>
					<% end %>
					<li><button type="button" class="btn btn-default navbar-btn btn-event" data-toggle="modal" data-target="#myModal">Criar Evento!</button></li>
				</ul>
			</div>

			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<% flash.each do |key, value| %>
    <div class="alert alert-<%= key %> centralizado notice"><%= value %></div>
  <% end %>

	<%= yield %>

	<!-- /.container -->

	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h2 class="modal-title centralizado" id="myModalLabel">Criar Evento</h2>
	      </div>
	      <div class="modal-body gray">

	     <!-- CONTEUDO-->

	      	<div class="container">

	      		<%= form_tag 'event', method: :post do %>
							
							<%= hidden_field_tag :authenticity_token, form_authenticity_token %>
							<div class="form-group">
	      				<%= label_tag :title, 'Nome:' %>
        				<%= text_field_tag :title, params[:title], :required => true %>
        			</div>

        			<div class="form-group">
	      				<%= label_tag :description, 'Descrição:' %>
        				<%= text_area_tag :description, params[:description] %>
        			</div>

							<div class="form-group">
								<%= label_tag :date, 'Data:' %>
								<%= date_field_tag :date_field, params[:date] %>
							</div>

							<div class="form-group">
								<%= label_tag :time, 'Horário:' %>
								<%= time_select :time, params[:time], include_seconds: true, :required => true %>
							</div>

							<div class="form-group">
								<%= label_tag :category_id, 'Categoria:' %>
							 	<select name="category_id">
							    <option value="1">Artes</option>
							    <option value="2">Comidas e Bebidas</option>
							    <option value="3">Cursos</option>
							    <option value="4">Festas</option>
							    <option value="5">Networking</option>
							    <option value="6">Esporte e Bem-Estar</option>
							    <option value="7">Música</option>
							    <option value="8">Compras</option>
							  </select>
							</div>

							<div class="form-group">
								<%= label_tag :image, 'Imagem:' %>
        				<%= file_field :image, params[:image] %>
							</div>
							
							<div class="form-group">
								<%= label_tag :local, 'Local:' %>
        				<%= text_field_tag :local, params[:local] %>
							</div>

							<!-- MAPA -->
							<div class="form-group">
								<%= label_tag :location, 'Local' %>
						    <%= text_field_tag :location, params[:location], class: "location" %>
								<%= hidden_field :place, class: "place" %>
						    <%= hidden_field :lat, params[:lat], class: "latitude" %>
						    <%= hidden_field :lon, params[:lon], class: "longitude" %>
							</div>
						    
						  
						  <script src="//maps.googleapis.com/maps/api/js?libraries=places" type="text/javascript"></script>
						  <script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

						  <div id="map-container" style="width: 400px; height: 200px;">
						    <div id="map" style="width: 400px; height: 200px;"></div>
						  </div>
							<!-- FIM de MAPA -->

							<div class="modal-footer">
				        <button type="button" class="btn btn-default cancelar" data-dismiss="modal">Cancelar</button>
				        <%= submit_tag 'Criar', class: 'btn btn-primary' %>
				      </div>

	      		<% end %>
					</div>

			<!--FIM DO CONTEUDO -->

	      </div>
	    </div>
	  </div>
	</div>
	<!-- Fim Modal-->


	<!-- Data Picker Scripts -->
	<!--formden.js communicates with FormDen server to validate fields and submit via AJAX -->
	<script type="text/javascript" src="https://formden.com/static/cdn/formden.js"></script>
	
	<!-- Include jQuery -->
	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

	<!-- Bootstrap Date-Picker Plugin -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

	<!-- Fim Data Picker Scripts -->
</body>
</html>